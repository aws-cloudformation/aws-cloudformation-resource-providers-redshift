{
    "typeName": "AWS::Redshift::ScheduledAction",
    "description": "The `AWS::Redshift::ScheduledAction` resource creates an Amazon Redshift Scheduled Action.",
    "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-redshift",
    "definitions": {
        "ResizeClusterMessage": {
            "description": "Describes a pause cluster operation. For example, a scheduled action to run the `ResizeCluster` API operation.",
            "type": "object",
            "properties": {
                "ClusterIdentifier": {
                    "type": "string"
                },
                "ClusterType": {
                    "type": "string"
                },
                "NodeType": {
                    "type": "string"
                },
                "NumberOfNodes": {
                    "type": "integer"
                },
                "Classic": {
                    "type": "boolean"
                }
            },
            "required": [
                "ClusterIdentifier"
            ],
            "additionalProperties": false
        },
        "PauseClusterMessage": {
            "description": "Describes a resize cluster operation. For example, a scheduled action to run the `PauseCluster` API operation.",
            "type": "object",
            "properties": {
                "ClusterIdentifier": {
                    "type": "string"
                }
            },
            "required": [
                "ClusterIdentifier"
            ],
            "additionalProperties": false
        },
        "ResumeClusterMessage": {
            "description": "Describes a resume cluster operation. For example, a scheduled action to run the `ResumeCluster` API operation.",
            "type": "object",
            "properties": {
                "ClusterIdentifier": {
                    "type": "string"
                }
            },
            "required": [
                "ClusterIdentifier"
            ],
            "additionalProperties": false
        },
        "ScheduledActionType": {
            "type": "object",
            "oneOf": [
                {
                    "properties": {
                        "ResizeCluster": {
                            "description": "An action that runs a `ResizeCluster` API operation.",
                            "$ref": "#/definitions/ResizeClusterMessage"
                        }
                    },
                    "required": [
                        "ResizeCluster"
                    ],
                    "additionalProperties": false
                },
                {
                    "properties": {
                        "PauseCluster": {
                            "description": "An action that runs a `PauseCluster` API operation.",
                            "$ref": "#/definitions/PauseClusterMessage"
                        }
                    },
                    "required": [
                        "PauseCluster"
                    ],
                    "additionalProperties": false
                },
                {
                    "properties": {
                        "ResumeCluster": {
                            "description": "An action that runs a `ResumeCluster` API operation.",
                            "$ref": "#/definitions/ResumeClusterMessage"
                        }
                    },
                    "required": [
                        "ResumeCluster"
                    ],
                    "additionalProperties": false
                }
            ]
        },
        "timestamp": {
            "type": "string",
            "pattern": "^\\d{4}\\-(0[1-9]|1[0-2])\\-(0[1-9]|[1-2][0-9]|3[0-1])T(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])Z$"
        }
    },
    "properties": {
        "ScheduledActionName": {
            "description": "The name of the scheduled action. The name must be unique within an account.",
            "type": "string",
            "pattern": "^(?=^[a-z][a-z0-9]*(-[a-z0-9]+)*$).{1,60}$"
        },
        "TargetAction": {
            "description": "A JSON format string of the Amazon Redshift API operation with input parameters.",
            "$ref": "#/definitions/ScheduledActionType"
        },
        "Schedule": {
            "description": "The schedule in `at( )` or `cron( )` format.",
            "type": "string",
            "pattern": "^(at\\((19[7-9][0-9]|2[0-1][0-9][0-9])\\-(0[1-9]|1[0-2])\\-(0[1-9]|[1-2][0-9]|3[0-1])T(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9])\\)|(cron\\(([0-9]|[1-5][0-9]|\\*)([,|\\-|\\/]([0-9]|[1-5][0-9]))*\\s+([0-9]|1[0-9]|2[0-3]|\\*)([,|\\-|\\/]([0-9]|[1-5][0-9]))*\\s+([1-9]|[1-2][0-9]|3[0-1]|\\*|\\?)(([,|\\-|\\/]([1-9]|[1-2][0-9]|3[0-1]))|(L|W))*\\s+([1-9]|1[0-2]|JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC|\\*)([,|\\-|\\/]([1-9]|1[0-2]|JAN|FEB|MAR|APR|MAY|JUN|JUL|AUG|SEP|OCT|NOV|DEC))*\\s+([1-7]|MON|TUE|WED|THU|FRI|SAT|SUN|\\*|\\?)(([,|\\-|*|\\/|#]([1-7]|MON|TUE|WED|THU|FRI|SAT|SUN|\\*|\\?))|L)*\\s+(19[7-9][0-9]|2[0-1][0-9][0-9]|\\*)([,|\\-|\\/](19[7-9][0-9]|2[0-1][0-9][0-9]))*\\)))$"
        },
        "IamRole": {
            "description": "The IAM role to assume to run the target action.",
            "type": "string",
            "pattern": "^.+:.+:.+::\\d{12}:.+\\/.+$"
        },
        "ScheduledActionDescription": {
            "description": "The description of the scheduled action.",
            "type": "string",
            "pattern": "^(?=^[\\x09\\x0a\\x0d\\x20-\\xff]*$).{1,255}$"
        },
        "State": {
            "description": "The state of the scheduled action.",
            "type": "string",
            "enum": [
                "ACTIVE",
                "DISABLED"
            ]
        },
        "NextInvocations": {
            "description": "List of times when the scheduled action will run.",
            "type": "array",
            "insertionOrder": false,
            "items": {
                "$ref": "#/definitions/timestamp"
            }
        },
        "StartTime": {
            "description": "The start time in UTC of the scheduled action. Before this time, the scheduled action does not trigger.",
            "$ref": "#/definitions/timestamp"
        },
        "EndTime": {
            "description": "The end time in UTC of the scheduled action. After this time, the scheduled action does not trigger.",
            "$ref": "#/definitions/timestamp"
        },
        "Enable": {
            "description": "If true, the schedule is enabled. If false, the scheduled action does not trigger.",
            "type": "boolean"
        }
    },
    "additionalProperties": false,
    "required": [
        "ScheduledActionName"
    ],
    "primaryIdentifier": [
        "/properties/ScheduledActionName"
    ],
    "createOnlyProperties": [
        "/properties/ScheduledActionName"
    ],
    "readOnlyProperties": [
        "/properties/State",
        "/properties/NextInvocations"
    ],
    "writeOnlyProperties": [
        "/properties/Enable"
    ],
    "handlers": {
        "create": {
            "permissions": [
                "redshift:CreateScheduledAction",
                "redshift:PauseCluster",
                "redshift:ResumeCluster",
                "redshift:ResizeCluster",
                "iam:PassRole"
            ]
        },
        "read": {
            "permissions": [
                "redshift:DescribeScheduledActions"
            ]
        },
        "update": {
            "permissions": [
                "redshift:ModifyScheduledAction",
                "redshift:PauseCluster",
                "redshift:ResumeCluster",
                "redshift:ResizeCluster",
                "iam:PassRole"
            ]
        },
        "delete": {
            "permissions": [
                "redshift:DeleteScheduledAction"
            ]
        },
        "list": {
            "permissions": [
                "redshift:DescribeScheduledActions"
            ]
        }
    }
}
